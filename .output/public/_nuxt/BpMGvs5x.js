import N from"./C1Mbe6zW.js";import{_ as T}from"./Cfm1OL2t.js";import{C as U,c as n,o as a,a as t,n as V,F as v,p as y,b as u,B as S,t as d,r as F,g as b,j as s,y as q,v as D,x as L,I as E,w as M,d as z}from"./DKez8kYg.js";import{u as j}from"./9tO5H0Mi.js";import{u as A}from"./CWq2zBiV.js";const G={class:"flex items-center"},H={class:"flex"},J=["onClick","disabled"],K={key:0,class:"ml-2 text-sm text-gray-500"},O=U({__name:"RecipeRating",props:{rating:{},count:{default:0},showCount:{type:Boolean,default:!1},interactive:{type:Boolean,default:!1}},emits:["update:rating"],setup(w,{emit:g}){const p=w,m=g,e=i=>{p.interactive&&m("update:rating",i)};return(i,k)=>{const x=N;return a(),n("div",G,[t("div",H,[(a(),n(v,null,y(5,r=>t("button",{key:r,onClick:_=>e(r),class:"focus:outline-none",disabled:!i.interactive},[u(x,{name:r<=i.rating?"star-solid":"star",class:S(["w-5 h-5",[r<=i.rating?"text-yellow-400":"text-gray-300",i.interactive?"hover:text-yellow-400":""]])},null,8,["name","class"])],8,J)),64))]),i.showCount?(a(),n("span",K," ("+d(i.count)+") ",1)):V("",!0)])}}}),P={class:"mt-8"},Q={class:"flex items-center mb-6"},W={class:"bg-gray-50 rounded-lg p-6 mb-8"},X={class:"text-lg font-medium mb-4"},Y={class:"flex gap-4"},Z={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200"},tt={key:0,class:"space-y-6"},et={class:"flex justify-between items-start mb-2"},st={class:"font-medium text-gray-900"},ot={class:"flex items-center text-sm text-gray-500"},nt={class:"ml-2"},at={class:"flex items-center gap-2"},lt=["onClick"],it={class:"text-sm"},rt=["onClick"],ct=["onClick"],dt={class:"text-gray-600"},ut={key:1,class:"bg-white rounded-lg shadow-sm p-6 text-center"},mt={__name:"RecipeReviews",props:{recipeId:{type:Number,required:!0}},setup(w){const g=w,p=j(),m=F(null),e=F({author:"",rating:0,comment:""}),i=b(()=>{const o=p.getRecipeById(g.recipeId);return(o==null?void 0:o.reviews)||[]}),k=b(()=>[...i.value].sort((o,l)=>new Date(l.date).getTime()-new Date(o.date).getTime())),x=b(()=>i.value.length?i.value.reduce((l,f)=>l+f.rating,0)/i.value.length:0),r=o=>new Date(o).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}),_=o=>{m.value=o,e.value={author:o.author,rating:o.rating,comment:o.comment}},$=()=>{m.value=null,e.value={author:"",rating:0,comment:""}},C=()=>{m.value?(p.updateReview(g.recipeId,m.value.id,{author:e.value.author,rating:e.value.rating,comment:e.value.comment}),$()):(p.addReview(g.recipeId,{author:e.value.author,rating:e.value.rating,comment:e.value.comment}),e.value={author:"",rating:0,comment:""})},R=o=>{confirm("Вы уверены, что хотите удалить этот отзыв?")&&p.deleteReview(g.recipeId,o)},h=o=>{p.toggleLike(g.recipeId,o)};return(o,l)=>{const f=O,I=N;return a(),n("div",P,[l[7]||(l[7]=t("h2",{class:"text-xl font-semibold mb-4"},"Отзывы",-1)),t("div",Q,[u(f,{rating:s(x),count:s(i).length,"show-count":!0,interactive:!1},null,8,["rating","count"])]),t("div",W,[t("h3",X,d(s(m)?"Редактировать отзыв":"Оставить отзыв"),1),t("form",{onSubmit:q(C,["prevent"]),class:"space-y-4"},[t("div",null,[l[3]||(l[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ваше имя",-1)),D(t("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>s(e).author=c),type:"text",required:"",class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,s(e).author]])]),t("div",null,[l[4]||(l[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Оценка",-1)),u(f,{rating:s(e).rating,"onUpdate:rating":l[1]||(l[1]=c=>s(e).rating=c),interactive:!0,"show-count":!1},null,8,["rating"])]),t("div",null,[l[5]||(l[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Комментарий",-1)),D(t("textarea",{"onUpdate:modelValue":l[2]||(l[2]=c=>s(e).comment=c),required:"",rows:"3",class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,s(e).comment]])]),t("div",Y,[t("button",Z,d(s(m)?"Сохранить изменения":"Отправить отзыв"),1),s(m)?(a(),n("button",{key:0,type:"button",onClick:$,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors duration-200"}," Отмена ")):V("",!0)])],32)]),s(i).length>0?(a(),n("div",tt,[(a(!0),n(v,null,y(s(k),c=>(a(),n("div",{key:c.id,class:"bg-white rounded-lg shadow-sm p-6"},[t("div",et,[t("div",null,[t("h4",st,d(c.author),1),t("div",ot,[u(f,{rating:c.rating,"show-count":!1,interactive:!1},null,8,["rating"]),t("span",nt,d(r(c.date)),1)])]),t("div",at,[t("button",{onClick:B=>h(c.id),class:S(["flex items-center gap-1 text-gray-500 hover:text-red-500 transition-colors duration-200",{"text-red-500":c.isLiked}])},[u(I,{name:c.isLiked?"heart-solid":"heart",class:"w-5 h-5"},null,8,["name"]),t("span",it,d(c.likes),1)],10,lt),(a(),n("button",{key:0,onClick:B=>_(c),class:"text-gray-400 hover:text-blue-500 transition-colors duration-200"},[u(I,{name:"pencil",class:"w-5 h-5"})],8,rt)),(a(),n("button",{key:1,onClick:B=>R(c.id),class:"text-gray-400 hover:text-red-500 transition-colors duration-200"},[u(I,{name:"trash",class:"w-5 h-5"})],8,ct))])]),t("p",dt,d(c.comment),1)]))),128))])):(a(),n("div",ut,l[6]||(l[6]=[t("p",{class:"text-gray-500"},"Пока нет отзывов. Будьте первым, кто оставит отзыв!",-1)])))])}}},gt={class:"container mx-auto px-4 py-8"},pt={key:0,class:"max-w-4xl mx-auto"},_t={class:"mb-8"},ht={class:"relative h-96 rounded-lg overflow-hidden"},xt=["src","alt"],ft={key:1,class:"w-full h-full bg-gray-200 flex items-center justify-center"},vt={class:"absolute top-4 right-4 flex space-x-4"},yt={class:"grid grid-cols-1 md:grid-cols-3 gap-8"},bt={class:"md:col-span-2"},wt={class:"text-3xl font-bold mb-4"},kt={class:"text-gray-600 mb-6"},$t={class:"mb-8"},Rt={class:"space-y-2"},Ct={class:"mb-8"},It={class:"space-y-4"},Nt={class:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center mr-4"},St={class:"md:col-span-1"},Bt={class:"bg-gray-50 rounded-lg p-6"},Ft={class:"space-y-4"},Dt={class:"flex items-center"},Lt={class:"text-gray-600"},Ut={class:"flex items-center"},Vt={class:"text-gray-600"},jt={class:"flex items-center"},Tt={class:"text-gray-600"},qt={class:"mt-6"},Et={class:"flex flex-wrap gap-2"},Mt={class:"mt-12"},zt={key:1,class:"text-center py-12"},Ot=U({__name:"[id]",setup(w){const g=E(),p=j(),m=A(),e=b(()=>p.getRecipeById(Number(g.params.id))),i=b(()=>{var x;return((x=m.favorites)==null?void 0:x.includes(Number(g.params.id)))||!1}),k=()=>{i.value?m.removeFavorite(Number(g.params.id)):m.addFavorite(Number(g.params.id))};return(x,r)=>{var R;const _=N,$=T,C=mt;return a(),n("div",gt,[s(e)?(a(),n("div",pt,[t("div",_t,[t("div",ht,[s(e).imageUrl?(a(),n("img",{key:0,src:s(e).imageUrl,alt:s(e).title,class:"w-full h-full object-cover"},null,8,xt)):(a(),n("div",ft,r[0]||(r[0]=[t("span",{class:"text-gray-400 text-lg"},"Нет изображения",-1)]))),t("div",vt,[t("button",{onClick:k,class:"p-3 rounded-full bg-white/80 hover:bg-white transition-colors"},[u(_,{name:s(i)?"heart-solid":"heart",class:S(["w-6 h-6",s(i)?"text-red-500":"text-gray-500"])},null,8,["name","class"])]),u($,{to:`/recipes/${s(e).id}/edit`,class:"p-3 rounded-full bg-white/80 hover:bg-white transition-colors"},{default:M(()=>[u(_,{name:"pencil",class:"w-6 h-6 text-gray-500"})]),_:1},8,["to"])])])]),t("div",yt,[t("div",bt,[t("h1",wt,d(s(e).title),1),t("p",kt,d(s(e).description),1),t("div",$t,[r[2]||(r[2]=t("h2",{class:"text-xl font-semibold mb-4"},"Ингредиенты",-1)),t("ul",Rt,[(a(!0),n(v,null,y(s(e).ingredients,(h,o)=>(a(),n("li",{key:o,class:"flex items-center"},[r[1]||(r[1]=t("span",{class:"w-2 h-2 bg-blue-500 rounded-full mr-3"},null,-1)),z(" "+d(h),1)]))),128))])]),t("div",Ct,[r[3]||(r[3]=t("h2",{class:"text-xl font-semibold mb-4"},"Шаги приготовления",-1)),t("ol",It,[(a(!0),n(v,null,y(s(e).steps,(h,o)=>(a(),n("li",{key:o,class:"flex"},[t("span",Nt,d(o+1),1),t("span",null,d(h),1)]))),128))])])]),t("div",St,[t("div",Bt,[t("div",Ft,[t("div",Dt,[u(_,{name:"map-marker",class:"w-5 h-5 text-gray-500 mr-2"}),t("span",Lt,d(s(e).country),1)]),t("div",Ut,[u(_,{name:"clock",class:"w-5 h-5 text-gray-500 mr-2"}),t("span",Vt,d(s(e).cookingTime)+" минут",1)]),t("div",jt,[u(_,{name:"star",class:"w-5 h-5 text-yellow-400 mr-2"}),t("span",Tt,d(((R=s(e).rating)==null?void 0:R.toFixed(1))||"Нет оценок"),1)])]),t("div",qt,[r[4]||(r[4]=t("h3",{class:"text-lg font-semibold mb-3"},"Теги",-1)),t("div",Et,[(a(!0),n(v,null,y(s(e).tags,h=>(a(),n("span",{key:h,class:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm"},d(h),1))),128))])])])])]),t("div",Mt,[u(C,{"recipe-id":s(e).id},null,8,["recipe-id"])])])):(a(),n("div",zt,r[5]||(r[5]=[t("p",{class:"text-gray-500"},"Рецепт не найден",-1)])))])}}});export{Ot as default};
