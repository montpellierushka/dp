import{_ as R}from"./BVr2nheI.js";import{_ as S}from"./D1Xzauw6.js";import j from"./C1Mbe6zW.js";import{_ as M}from"./Cfm1OL2t.js";import{C as D,g as F,r as k,J as L,k as E,H,c as a,b as p,a as e,y as J,j as o,v as u,x as d,F as f,p as x,w as z,o as m,t as A,d as G}from"./DKez8kYg.js";import{u as K}from"./9tO5H0Mi.js";const O={class:"min-h-screen bg-gray-100"},P={class:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8"},Q={class:"px-4 py-6 sm:px-0"},W={class:"bg-white rounded-lg shadow-md p-6"},X={class:"space-y-2"},Y=["onUpdate:modelValue"],Z=["onClick"],ee={class:"space-y-2"},te={class:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center mt-2"},se=["onUpdate:modelValue"],oe=["onClick"],re={class:"space-y-2"},le=["onUpdate:modelValue"],ne=["onClick"],ie={class:"flex justify-end space-x-4"},ge=D({__name:"edit",setup(ae){const y=K(),v=H(),c=L(),_=F(()=>y.getRecipeById(Number(c.params.id))),t=k({id:Number(c.params.id),title:"",description:"",country:"",cookingTime:30,ingredients:[""],steps:[""],tags:[],imageUrl:""});E(()=>{_.value?t.value={..._.value}:v.push("/recipes")});const b=k(""),w=()=>{t.value.ingredients.push("")},h=l=>{t.value.ingredients.splice(l,1)},U=()=>{t.value.steps.push("")},V=l=>{t.value.steps.splice(l,1)},C=()=>{b.value.trim()&&!t.value.tags.includes(b.value.trim())&&(t.value.tags.push(b.value.trim()),b.value="")},T=l=>{t.value.tags.splice(l,1)},N=l=>{t.value.imageUrl=l},$=()=>{const l={...t.value,ingredients:t.value.ingredients.filter(Boolean),steps:t.value.steps.filter(Boolean),tags:t.value.tags.filter(Boolean)};y.updateRecipe(Number(c.params.id),l),v.push(`/recipes/${c.params.id}`)};return(l,s)=>{const q=R,B=S,g=j,I=M;return m(),a("div",O,[p(q),e("main",P,[e("div",Q,[e("div",W,[s[14]||(s[14]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-6"},"Редактировать рецепт",-1)),e("form",{onSubmit:J($,["prevent"]),class:"space-y-6"},[e("div",null,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Изображение",-1)),p(B,{"initial-image":o(t).imageUrl,onImageUploaded:N},null,8,["initial-image"])]),e("div",null,[s[5]||(s[5]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},"Название",-1)),u(e("input",{id:"title","onUpdate:modelValue":s[0]||(s[0]=n=>o(t).title=n),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[d,o(t).title]])]),e("div",null,[s[6]||(s[6]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"},"Описание",-1)),u(e("textarea",{id:"description","onUpdate:modelValue":s[1]||(s[1]=n=>o(t).description=n),rows:"3",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[d,o(t).description]])]),e("div",null,[s[7]||(s[7]=e("label",{for:"country",class:"block text-sm font-medium text-gray-700 mb-2"},"Страна",-1)),u(e("input",{id:"country","onUpdate:modelValue":s[2]||(s[2]=n=>o(t).country=n),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[d,o(t).country]])]),e("div",null,[s[8]||(s[8]=e("label",{for:"cookingTime",class:"block text-sm font-medium text-gray-700 mb-2"},"Время приготовления (минуты)",-1)),u(e("input",{id:"cookingTime","onUpdate:modelValue":s[3]||(s[3]=n=>o(t).cookingTime=n),type:"number",min:"1",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,512),[[d,o(t).cookingTime,void 0,{number:!0}]])]),e("div",null,[s[9]||(s[9]=e("label",{for:"ingredients",class:"block text-sm font-medium text-gray-700 mb-2"},"Ингредиенты",-1)),e("div",X,[(m(!0),a(f,null,x(o(t).ingredients,(n,r)=>(m(),a("div",{key:r,class:"flex items-center space-x-2"},[u(e("input",{"onUpdate:modelValue":i=>o(t).ingredients[r]=i,type:"text",required:"",class:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,8,Y),[[d,o(t).ingredients[r]]]),e("button",{type:"button",onClick:i=>h(r),class:"p-2 text-red-500 hover:text-red-600"},[p(g,{name:"trash",class:"w-5 h-5"})],8,Z)]))),128)),e("button",{type:"button",onClick:w,class:"text-blue-500 hover:text-blue-600 text-sm font-medium"}," + Добавить ингредиент ")])]),e("div",null,[s[10]||(s[10]=e("label",{for:"steps",class:"block text-sm font-medium text-gray-700 mb-2"},"Шаги приготовления",-1)),e("div",ee,[(m(!0),a(f,null,x(o(t).steps,(n,r)=>(m(),a("div",{key:r,class:"flex items-start space-x-2"},[e("span",te,A(r+1),1),u(e("textarea",{"onUpdate:modelValue":i=>o(t).steps[r]=i,rows:"2",required:"",class:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,8,se),[[d,o(t).steps[r]]]),e("button",{type:"button",onClick:i=>V(r),class:"p-2 text-red-500 hover:text-red-600 mt-2"},[p(g,{name:"trash",class:"w-5 h-5"})],8,oe)]))),128)),e("button",{type:"button",onClick:U,class:"text-blue-500 hover:text-blue-600 text-sm font-medium"}," + Добавить шаг ")])]),e("div",null,[s[11]||(s[11]=e("label",{for:"tags",class:"block text-sm font-medium text-gray-700 mb-2"},"Теги",-1)),e("div",re,[(m(!0),a(f,null,x(o(t).tags,(n,r)=>(m(),a("div",{key:r,class:"flex items-center space-x-2"},[u(e("input",{"onUpdate:modelValue":i=>o(t).tags[r]=i,type:"text",required:"",class:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,8,le),[[d,o(t).tags[r]]]),e("button",{type:"button",onClick:i=>T(r),class:"p-2 text-red-500 hover:text-red-600"},[p(g,{name:"trash",class:"w-5 h-5"})],8,ne)]))),128)),e("button",{type:"button",onClick:C,class:"text-blue-500 hover:text-blue-600 text-sm font-medium"}," + Добавить тег ")])]),e("div",ie,[p(I,{to:`/recipes/${o(c).params.id}`,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},{default:z(()=>s[12]||(s[12]=[G(" Отмена ")])),_:1},8,["to"]),s[13]||(s[13]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Сохранить изменения ",-1))])],32)])])])])}}});export{ge as default};
